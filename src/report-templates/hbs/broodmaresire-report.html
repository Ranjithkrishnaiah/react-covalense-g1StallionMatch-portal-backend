<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Stallion Match Broodmare Affinity</title>
    <link rel="stylesheet" href="{{this.pathReportTemplateStylesAdmin}}/css/reports.css">
    <link rel="stylesheet" href="{{this.pathReportTemplateStylesAdmin}}/css/pedegree.css">
    <script src="{{this.pathReportTemplateStylesAdmin}}/js/chart.js"></script>
    <style>
        @media print {
            @page {
                size: A5 portrait;
            }
            .reports-wrapper {
                break-inside: avoid;
            }
        }
    </style>
</head>
<body>
 <div class="reports-wrapper home-wrapper" style="background: #1d472e;">
    <div class="content-wrapper">
        <div class="damsire-banner" style="background:url({{this.pathReportTemplateStylesAdmin}}/images/damsire-banner.jpg) no-repeat center">
            <div class="green-tiles"><img src="{{this.pathReportTemplateStylesAdmin}}/images/green-tiles.png" alt="SMP"/></div>
            <div class="home-logo">
                <img src="{{this.pathReportTemplateStylesAdmin}}/images/stallion-main-logo.png" alt="Stallion Match"/>
            </div>
        </div>
        <div class="home-content damsire-content">
            <h1>Powering<br/>Tomorrow’s Winners</h1>
            <h5> Stallion Match <strong>Broodmare Sire</strong> Report</h5>
            
        </div>
    </div>
 </div>
 <div class="reports-wrapper inner-wrapper" style="margin-top: 16px; background: #ffffff;">
 <div class="content-wrapper">
    <h1>{{mareName}}<br/><span>({{cob}}, {{yob}}, {{sireName}} X {{damName}})</span></h1>
    <div class="affinity-internal">
       <div style="margin-right: 100px;">
         <h6>Date:</h6>
         <h5>
             {{reportDate}}
         </h5>
        </div>
       <div>
         <h6>Prepared for:</h6>
         <h5>
            {{preparedFor}}
         </h5>
       </div>
    </div>
    <div class="report-internal">
     <div>
       <h6>Locations:</h6>
       <h5>
        {{locations}}
       </h5>
      </div>
  </div>
  {{#if farmsIncluded}}
        <div class="affinity-internal">
            <div>
            <h6>Farms Included:</h6>
            <h5>
                {{farmsIncluded}}
            </h5>
            </div>
        </div>
    {{/if}}
 </div>
 <div class="footer-wrapper">
     <img src="{{this.pathReportTemplateStylesAdmin}}/images/stallion-logo.png" alt="stallion match"/>
 </div>  
</div>
{{{item}}}

<div class="reports-wrapper inner-wrapper" style="margin-top: 16px; background: #ffffff;">
    <div class="content-wrapper">
       <h1>Stallion Match Broomdare Sire<br/> Report Explained</h1>
       <div class="affinity-analysis-internal">
          <div>
                <p>The Stallion Match Broomdare Sire Report analyses a selection of stallions against your mare derived from your selected location and/or farms. Stallion Match leverages its immense global database to identify success through the stallion population to produce the following indicators:</p>
                <p><span>                  
                    - # G1 winners<br/>
                    - # Stakes winners<br/>
                    - # Runners<br/>
                    - G1/Runners %<br/>
                    - SW/Runners %
                </span>
                </p> 
                <p>The final result is a simple report identifying the most suitable sirelines for your mare and her sire (broodmare sire).</p>
           </div>
          <div>
                <p class="success">
                <span>Age Profile</span><br/>
                All stakes winners with a similar pedigree to the proposed hypothetical mating are plotted on a radar chart by sex, showing the stakes-winning success by age and sex.<br/>
                The resulting spread is then analysed, and an Age Profile is determined.
                </p>
                <p class="success">
                 <span>Distance Profile</span><br/>
                 All stakes winners with a similar pedigree to the proposed hypothetical mating are plotted on a radar chart by sex, showing the stakes-winning success by distance and sex.<br/>
                 The resulting spread is then analysed, and a Distance Profile is determined - Sprinter, Middle-Distance, Stayer.
                </p>
                <p class="success">
                    <span>Top Performing Sire lines</span><br/>
                    The system decontructs your broodmare and more specifically uses her sire (broodmare sire) to identify the most successful sire line. Results include:
                   </p>
                <p class="success" style="padding-bottom:0px;">
                    - Sire / Grandsire Name<br/>
                    - G1 winners (total #)<br/>
                    - Stakes winners (total #)<br/>
                    - Runners (total #)<br/>
                    - G1 Winners / Runners %<br/>
                    - Stakes Winners / Runners %<br/>
                    - Success banding:
                </p>
                <p class="success damsire-success">
                    <span style="color:#BD9A68;">- Gold:</span> an elite strike rate in the top 10% of the population.
                </p>
                <p class="success damsire-success">
                        <span style="color:#007142;">- Green:</span> an above-average strike rate within the top 30% of the population.
                </p>
                <p class="success damsire-success">
                    <span style="color:#C75227;"> - Burnt Orange:</span> a below-average strike rate that is in the bottom 30% of the population.
            </p>
            </h4>
          </div>
       </div>
    </div>
    <div class="footer-wrapper">
        <img src="{{this.pathReportTemplateStylesAdmin}}/images/stallion-logo.png" alt="stallion match"/>
    </div>
 </div>

 <div class="reports-wrapper inner-wrapper" style="margin-top: 16px; background: #ffffff;">
    <div class="content-wrapper">
       <h3>{{mareName}} Pedigree</h3>
       <h6>({{cob}}, {{yob}}, {{sireName}} X {{damName}})</h6>
       <!-- pedegree-started -->
       <div class="pedegree-box">
         <div class="tree__line" data-num="1"></div>
         <div class="tree__line" data-num="2"></div>
         <div class="tree__line" data-num="3"></div>
         <div class="tree__line" data-num="4"></div>
         <div class="tree__line" data-num="5"></div>
         <div class="tree__line" data-num="6"></div>
         <div class="tree__line" data-num="7"></div>
         {{#each pedigree}}
         {{#if @index}}
         {{#ifFifthGen @index}}
         <div class="tree__col" data-col="{{@index}}">
            {{#each this}}
            <div class="tree__cellgroup">
                {{#each this}}
                    <div class="tree__cell">
                        <div class="tree_cell_box {{this.colour}}">
                            <h6>{{this.horseName}}</h6>
                            <!-- {{#if this.category}}
                                <p>{{this.category}}</p>
                            {{/if}} -->
                        </div>
                    </div>
                {{/each}}
            </div>
            {{/each}}
        </div>
         {{else}}
         <div class="tree__col" data-col="{{@index}}">
            {{#each this}}
            <div class="tree__cell">
                <div class="tree_cell_box {{this.colour}}">
                    <h6>{{this.horseName}}</h6>
                    {{#lEq this.generation 2}}
                        {{#if this.category}}
                            <p>{{this.category}}</p>
                        {{/if}}
                     {{/lEq}}
                </div>
            </div>
            {{/each}}
         </div>
         {{/ifFifthGen}}
         {{else}}
         <div class="tree__col" data-col="0">
            {{#each this}}
            <div class="tree__cell">
                <div class="tree_cell_box">
                    <div class="tree_cell_box_left">
                       <div class="avatar_box">
                         <img src="{{this.image}}" alt="" style="width: 22px;height: 22px;">
                       </div>
                    </div>
                    <div class="tree_cell_box_right">
                        <h6>{{this.horseName}}</h6>
                        {{#if this.category}}
                            <p>{{this.category}}</p>
                        {{/if}}
                    </div>
                </div>
            </div>
            {{/each}}
         </div>
         {{/if}}
         {{/each}}
       </div>
<!-- pedegree-End -->
 <div class="common-datatable stallion-ancestors-table">
        <h3>{{mareName}}’s Pedigree Stakes Profile</h3>
         <div class="pedigree-graph">
            <div>
                <div class="BROODMARESIRE_AGE">
                    <canvas id="GRAPH_RADAR_BROODMARESIRE_AGE" style="width:100%; height: 280px; float:left"></canvas>
                    <img id="GRAPH_RADAR_BROODMARESIRE_AGE_IMAGE" src=""/>
                    <input type="text" id="READY_GRAPH_AGE" style="visibility: hidden; opacity: 0;">
                </div>
            </div>
            <div>
                <div class="BROODMARESIRE_DISTANCE">
                    <canvas id="GRAPH_RADAR_BROODMARESIRE_DISTANCE" style="width:100%; height: 280px; float:left"></canvas>
                    <img id="GRAPH_RADAR_BROODMARESIRE_DISTANCE_IMAGE" src=""/>
                    <input type="text" id="READY_GRAPH_DISTANCE" style="visibility: hidden; opacity: 0;">
                </div>
            </div>

         </div>
       </div>
    </div>
    <div class="footer-wrapper">
        <img src="{{this.pathReportTemplateStylesAdmin}}/images/stallion-logo.png" alt="stallion match"/>
    </div>
 </div> 

 {{#each topperformingsirelines}}
 <div class="reports-wrapper inner-wrapper" style="margin-top: 16px; background: #ffffff;">
    <div class="content-wrapper">
       <h1>Top Performing Sire lines</h1>
       <div class="stake-winners">
        <h3>Matched With Your Broodmare’s Sire</h3>
        <div class="common-datatable stakes-comparison">
            <div class="datatable">
               <table>
                   <thead>
                       <tr>
                           <th style="width:120px;">Horse</th>
                           <th class="equal-width">G1 Winners</th>
                           <th class="equal-width">Stakes Winners</th>
                           <th class="equal-width">Runners</th>
                           <th class="equal-width">G1/Rnrs %</th>
                           <th class="equal-width">SWs/Rnrs %</th>
                           <th style="width:50px;">&nbsp;</th>
                         </tr>
                   </thead>
                   <tbody>
                    {{#each this}}
                       <tr>
                           <td>{{this.horseName}}</td>
                           <td>{{this.g1Winners}}</td>
                           <td>{{this.stakesWinners}}</td>
                           <td>{{this.runners}}</td>
                           <td>{{this.g1RnrsPercent}}</td>
                           <td>{{this.sWsRnrsPercent}}</td>
                           <td class={{this.colour}}>&nbsp;</td>
                         </tr>
                    {{/each}}
                   </tbody>
                 </table>
            </div>
          </div>
       </div>
 </div>
    <div class="footer-wrapper">
        <img src="{{../this.pathReportTemplateStylesAdmin}}/images/stallion-logo.png" alt="stallion match"/>
    </div>
 </div>
 {{/each}}
 <script>
    var GRAPH_RADAR_BROODMARESIRE_AGE_XVALUES;
    var GRAPH_RADAR_BROODMARESIRE_AGE_DATASETS;
    var ageChart = new Chart(document.getElementById('GRAPH_RADAR_BROODMARESIRE_AGE').getContext('2d'), {
      type: "radar",
      data: {
        labels: GRAPH_RADAR_BROODMARESIRE_AGE_XVALUES,
        datasets: GRAPH_RADAR_BROODMARESIRE_AGE_DATASETS
      },
      options: {
        animation: {
            onComplete: function () {
                var image = ageChart.toBase64Image();
                var ageChartImage = document.getElementById('GRAPH_RADAR_BROODMARESIRE_AGE_IMAGE')
                ageChartImage.src = image
                let ageChartElement = document.getElementById("GRAPH_RADAR_BROODMARESIRE_AGE");
                ageChartElement.remove()
                const elements = document.getElementsByClassName("chartjs-size-monitor");
                while(elements.length > 0){
                    elements[0].parentNode.removeChild(elements[0]);
                }
                document.getElementById('READY_GRAPH_AGE').style.visibility = 'visible';
            },
        },
        elements: {
            line: {
                borderWidth: 3
            }
        },
        plugins: {
        legend: {
          position: 'bottom',
          // align: 'end'
        },
        title: {
            display: true,
            text: 'Age',
            position:'bottom',
            color:'#000000',
            font: {
                size: 16
            }
        }
    }
      }
    });

    var GRAPH_RADAR_BROODMARESIRE_DISTANCE_XVALUES;
    var GRAPH_RADAR_BROODMARESIRE_DISTANCE_DATASETS;
    var distanceChart = new Chart(document.getElementById('GRAPH_RADAR_BROODMARESIRE_DISTANCE').getContext('2d'), {
      type: "radar",
      data: {
        labels: GRAPH_RADAR_BROODMARESIRE_DISTANCE_XVALUES,
        datasets: GRAPH_RADAR_BROODMARESIRE_DISTANCE_DATASETS
      },
      options: {
        animation: {
            onComplete: function () {
                var distanceImage = distanceChart.toBase64Image();
                var distanceChartImage = document.getElementById('GRAPH_RADAR_BROODMARESIRE_DISTANCE_IMAGE')
                distanceChartImage.src = distanceImage
                let distanceChartElement = document.getElementById("GRAPH_RADAR_BROODMARESIRE_DISTANCE");
                distanceChartElement.remove()
                const elements = document.getElementsByClassName("chartjs-size-monitor");
                while(elements.length > 0){
                    elements[0].parentNode.removeChild(elements[0]);
                }
                document.getElementById('READY_GRAPH_DISTANCE').style.visibility = 'visible';
            },
        },
        elements: {
            line: {
                borderWidth: 3
            }
        },
        plugins: {
        legend: {
          position: 'bottom',
          // align: 'end'
        },
        title: {
            display: true,
            text: 'Distance',
            position:'bottom',
            color:'#000000',
            font: {
                size: 16
            }
        }
    }
      }
    });
</script>
</body>
</html>